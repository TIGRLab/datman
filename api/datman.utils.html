<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>datman.utils module &mdash; Datman 0.1.dev1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="datman.xnat module" href="datman.xnat.html" />
    <link rel="prev" title="datman.scanid module" href="datman.scanid.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Datman
          </a>
              <div class="version">
                0.1.dev1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html#docker-container">Docker Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing to Datman</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datman_conf.html">Configuration Files</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">Library API (application program interface)</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="datman.html">datman package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="datman.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="datman.config.html">datman.config module</a></li>
<li class="toctree-l4"><a class="reference internal" href="datman.dashboard.html">datman.dashboard module</a></li>
<li class="toctree-l4"><a class="reference internal" href="datman.exceptions.html">datman.exceptions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="datman.exporters.html">datman.exporters module</a></li>
<li class="toctree-l4"><a class="reference internal" href="datman.fs_log_scraper.html">datman.fs_log_scraper module</a></li>
<li class="toctree-l4"><a class="reference internal" href="datman.header_checks.html">datman.header_checks module</a></li>
<li class="toctree-l4"><a class="reference internal" href="datman.metrics.html">datman.metrics module</a></li>
<li class="toctree-l4"><a class="reference internal" href="datman.scan.html">datman.scan module</a></li>
<li class="toctree-l4"><a class="reference internal" href="datman.scan_list.html">datman.scan_list module</a></li>
<li class="toctree-l4"><a class="reference internal" href="datman.scanid.html">datman.scanid module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">datman.utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="datman.xnat.html">datman.xnat module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">What’s new?</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Datman</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api.html">Library API (application program interface)</a></li>
          <li class="breadcrumb-item"><a href="datman.html">datman package</a></li>
      <li class="breadcrumb-item active">datman.utils module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/datman.utils.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-datman.utils">
<span id="datman-utils-module"></span><h1>datman.utils module<a class="headerlink" href="#module-datman.utils" title="Permalink to this headline"></a></h1>
<p>A collection of utilities for generally munging imaging data.</p>
<dl class="py class">
<dt class="sig sig-object py" id="datman.utils.XNATConnection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">XNATConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xnat_url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1063"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.XNATConnection" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="datman.utils.cd">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">cd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1041"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.cd" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A context manager for changing directory. Since best practices dictate
returning to the original directory, saves the original directory and
returns to it after the block has exited.</p>
<p>May raise OSError if the given path doesn’t exist (or the current directory
is deleted before switching back)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.check_dependency_configured">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">check_dependency_configured</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">program_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shell_cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1121"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.check_dependency_configured" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>&lt;program_name&gt;      Name to add to the exception message if the program is</dt><dd><p>not correctly configured.</p>
</dd>
<dt>&lt;shell_cmd&gt;         A command line command that will be put into ‘which’,</dt><dd><p>to check whether the shell can find it.</p>
</dd>
<dt>&lt;env_vars&gt;          A list of shell variables that are expected to be set.</dt><dd><p>Doesnt verify the value of these vars, only that they
are all set.</p>
</dd>
</dl>
<p>Raises EnvironmentError if the command is not findable or if any
environment variable isnt configured.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.check_returncode">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">check_returncode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">returncode</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L954"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.check_returncode" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.define_folder">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">define_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L833"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.define_folder" title="Permalink to this definition"></a></dt>
<dd><p>Sets a variable to be the path to a folder. Also, if the folder does not
exist, this makes it so, unless we lack the permissions to do so, which
leads to a graceful exit.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.filter_niftis">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">filter_niftis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">candidates</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1006"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.filter_niftis" title="Permalink to this definition"></a></dt>
<dd><p>Takes a list and returns all items that contain the extensions
‘.nii’ or ‘.nii.gz’.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.find_tech_notes">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">find_tech_notes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1336"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.find_tech_notes" title="Permalink to this definition"></a></dt>
<dd><p>Find any technotes located within a folder.</p>
<p>If only one PDF is found it is assumed to be the tech notes. If multiple
are found, unless one contains the string ‘TechNotes’, the first pdf is
guessed to be the tech notes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – A full path to a folder to search.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The full path to the tech notes or an empty string if</dt><dd><p>none have been found.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>path (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_all_headers_in_folder">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_all_headers_in_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L810"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_all_headers_in_folder" title="Permalink to this definition"></a></dt>
<dd><p>Get DICOM headers for all files in the given path.</p>
<p>Returns a dictionary mapping path-&gt;headers for <em>all</em> files (headers == None
for files that are not dicoms).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_archive_headers">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_archive_headers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_after_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L709"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_archive_headers" title="Permalink to this definition"></a></dt>
<dd><p>Get dicom headers from a scan archive.</p>
<p>Path can be a path to a tarball or zip of dicom folders, or a folder. It is
assumed that this archive contains the dicoms from a single exam, organized
into folders for each series.</p>
<p>The entire archive is scanned and dicom headers from a single file in each
folder are returned as a dictionary that maps path-&gt;headers.</p>
<p>If stop_after_first == True only a single set of dicom headers are
returned for the entire archive, which is useful if you only care about the
exam details.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_extension">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_extension</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L693"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_extension" title="Permalink to this definition"></a></dt>
<dd><p>Get the filename extension on this path.</p>
<p>This is a slightly more sophisticated version of os.path.splitext in that
this will correctly return the extension for ‘.tar.gz’ files, for example.
:D</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_files_with_tag">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_files_with_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parentdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fuzzy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L923"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_files_with_tag" title="Permalink to this definition"></a></dt>
<dd><p>Returns a list of files that have the specified tag.</p>
<p>Filenames must conform to the datman naming convention (see
scanid.parse_filename) in order to be considered.</p>
<p>If fuzzy == True, then filenames are matched if the given tag is found
within the filename’s tag.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_folder_headers">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_folder_headers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_after_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L780"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_folder_headers" title="Permalink to this definition"></a></dt>
<dd><p>Generate a dictionary of subfolders and dicom headers.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_loaded_modules">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_loaded_modules</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L959"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_loaded_modules" title="Permalink to this definition"></a></dt>
<dd><p>Returns a space separated list of loaded modules</p>
<p>These are modules loaded by the environment-modules system. This function
just looks in the LOADEDMODULES environment variable for the list.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_relative_source">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_relative_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1109"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_relative_source" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_resources">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_resources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">open_zipfile</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1285"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_resources" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_subject_metadata">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_subject_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">study</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_partial</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L631"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_subject_metadata" title="Permalink to this definition"></a></dt>
<dd><p>Returns all QC’d session IDs mapped to any blacklisted scans they have</p>
<p>This will collect and organize all checklist and blacklist data for a
study. Sessions that do not have a completed checklist entry will have
their blacklist entries ommitted from the output unless the ‘allow_partial’
flag is used. This is done so that partially QC’d subjects do not
accidentally get processed by downstream pipelines.</p>
<p>Either a study name or a datman config object must be supplied to
find the checklist and blacklist contents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="datman.config.html#datman.config.config" title="datman.config.config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">datman.config.config</span></code></a>, optional) – A datman config object
with the study set to the study of interest.</p></li>
<li><p><strong>study</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, optional) – A datman study name</p></li>
<li><p><strong>allow_partial</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to include blacklist entries
if the subject has not been fully QC’d (i.e. if they dont have
a completed checklist entry yet). Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary with any QC’d subject ID mapped to a list of
blacklisted scan names that have been mangled to drop the series
description and the file extension.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_tarfile_headers">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_tarfile_headers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_after_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L734"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_tarfile_headers" title="Permalink to this definition"></a></dt>
<dd><p>Get headers for dicom files within a tarball</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_xnat_credentials">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_xnat_credentials</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xnat_cred</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1079"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_xnat_credentials" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.get_zipfile_headers">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">get_zipfile_headers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_after_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L757"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.get_zipfile_headers" title="Permalink to this definition"></a></dt>
<dd><p>Get headers for a dicom file within a zipfile</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.has_permissions">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">has_permissions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L852"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.has_permissions" title="Permalink to this definition"></a></dt>
<dd><p>Checks for write access to submitted path.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.is_dicom">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">is_dicom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileobj</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1309"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.is_dicom" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.is_named_like_a_dicom">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">is_named_like_a_dicom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1304"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.is_named_like_a_dicom" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.locate_metadata">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">locate_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">study</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L34"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.locate_metadata" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.make_temp_directory">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">make_temp_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tmp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/../../../../../../opt/hostedtoolcache/Python/3.8.16/x64/lib/python3.8/contextlib.py#L979"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.make_temp_directory" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.make_zip">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">make_zip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_zip</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1319"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.make_zip" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.makedirs">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">makedirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L946"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.makedirs" title="Permalink to this definition"></a></dt>
<dd><p>Make the directory (including parent directories) if they don’t exist</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.nifti_basename">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">nifti_basename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fpath</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L996"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.nifti_basename" title="Permalink to this definition"></a></dt>
<dd><p>return basename without extension (either .nii.gz or .nii)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.read_blacklist">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">read_blacklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">study</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bids_ses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_bids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L365"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.read_blacklist" title="Permalink to this definition"></a></dt>
<dd><p>This function is used to look up blacklisted scans. If the dashboard is
found it ONLY checks the dashboard database. Otherwise it expects a datman
style ‘blacklist’ file on the filesystem.</p>
<dl class="simple">
<dt>This function can accept:</dt><dd><ul class="simple">
<li><p>A study name (nickname, not study tag)</p></li>
<li><p>A datman scan name (may include the full path and extension)</p></li>
<li><p>A BIDS scan name (set the use_bids option to ‘True’)</p></li>
<li><p>A subject ID</p></li>
<li><p>A datman config object, initialized to the study being worked with</p></li>
<li><dl class="simple">
<dt>A full path directly to a blacklist file. If given, this will</dt><dd><p>circumvent any dashboard database checks and ignore any datman
config files.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>A dictionary of scan names mapped to the comment provided when they
were blacklisted (Note: If reading from the filesystem, commas
contained in comments will be removed)</p></li>
<li><p>OR a dictionary of the same format containing only entries
for a single subject if a specific subject ID was given</p></li>
<li><p>OR the comment for a specific scan if a scan is given</p></li>
<li><p>OR ‘None’ if a scan is given but not found in the blacklist</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.read_checklist">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">read_checklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">study</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bids_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bids_ses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_bids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L54"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.read_checklist" title="Permalink to this definition"></a></dt>
<dd><p>This function is used to look-up QC checklist entries. If the dashboard is
found it will ONLY check the dashboard database, otherwise it expects a
datman style ‘checklist’ file on the filesystem.</p>
<dl class="simple">
<dt>This function can accept either:</dt><dd><ol class="arabic simple">
<li><p>A study name (nickname, not the study tag) or subject ID (Including
a session number and may use BIDS ID instead of datman ID)</p></li>
<li><p>A datman config object, initialized to the study being worked with</p></li>
<li><p>A full path directly to a checklist file (Will circumvent the
dashboard database check and ignore any datman config files)</p></li>
</ol>
</dd>
</dl>
<p>Set use_bids=True to return an entire study’s checklist organized by BIDS
name instead of datman name. This option only works with dashboard
integration.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>A dictionary of subject IDs mapped to their comment / name of the
person who signed off on their data</p></li>
<li><p>OR the comment for a specific subject if a subject ID is given</p></li>
<li><p>OR ‘None’ if a specific subject ID is given and they’re not found
in the list</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.read_credentials">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">read_credentials</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cred_file</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1097"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.read_credentials" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.read_json">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">read_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1367"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.read_json" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.remove_empty_files">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">remove_empty_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L988"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.remove_empty_files" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.run">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">specialquote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L877"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.run" title="Permalink to this definition"></a></dt>
<dd><p>Runs the command in default shell, returning STDOUT and a return code.
The return code uses the python convention of 0 for success, non-zero for
failure</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.run_dummy_q">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">run_dummy_q</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list_of_names</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L865"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.run_dummy_q" title="Permalink to this definition"></a></dt>
<dd><p>This holds the script until all of the queued items are done.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.split_path">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">split_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1023"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.split_path" title="Permalink to this definition"></a></dt>
<dd><p>Splits a path into all the component parts, returns a list</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">split_path</span><span class="p">(</span><span class="s1">&#39;a/b/c/d.txt&#39;</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d.txt&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.splitext">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">splitext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L968"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.splitext" title="Permalink to this definition"></a></dt>
<dd><p>Function that will remove extension, including specially-defined extensions
that fool os.path.splitext</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.submit_job">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">submit_job</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'other'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpu_cores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walltime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'2:00:00'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argslist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/tmp'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1206"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.submit_job" title="Permalink to this definition"></a></dt>
<dd><p>submits a job or joblist the queue depending on the system</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>submit</strong> (<em>cmd                         Command</em><em> or </em><em>list of commands to</em>) – </p></li>
<li><p><strong>job</strong> (<em>job_name                    The name for the</em>) – </p></li>
<li><p><strong>go</strong> (<em>log_dir                     Path to where the job logs should</em>) – </p></li>
<li><p><strong>to</strong> (<em>system                      Current system running</em><em> (</em><em>similar</em>) – DM_SYSTEM) [default=other]</p></li>
<li><p><strong>for</strong> (<em>cpu_cores                   Number of cores to allocate</em>) – job [default=1]</p></li>
<li><p><strong>[</strong><strong>default=2</strong> (<em>walltime                    Real clock time for job</em>) – 00:00]</p></li>
<li><p><strong>not</strong> (<em>dryrun                      Set to true if you want job to</em>) – submit [default=False]</p></li>
<li><p><strong>the</strong> (<em>partition                   Slurm partition. If none specified</em>) – default queue will be used</p></li>
<li><p><strong>(</strong><strong>etc</strong> (<em>argslist                    String of additional slurm arguments</em>) – –mem X –verbose …) [default=None]</p></li>
<li><p><strong>work</strong> (<em>workdir                     Location for slurm to use as the</em>) – dir [default=’/tmp’]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.update_blacklist">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">update_blacklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">study</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L547"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.update_blacklist" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.update_checklist">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">update_checklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">study</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L275"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.update_checklist" title="Permalink to this definition"></a></dt>
<dd><p>Add or update QC checklist entries.</p>
<p>This will preferentially update the dashboard database (ignoring any
‘checklist.csv’ files) unless the dashboard is not installed or a specific
path is given to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>) – A dictionary of subject IDs mapped to the
comment to add / update. Use an empty string to indicate sign off.</p></li>
<li><p><strong>study</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, optional) – the name of the study the subject(s)
belong to.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="datman.config.html#datman.config.config" title="datman.config.config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">datman.config.config</span></code></a>, optional) – the configuration
for the study the subject(s) belong to.</p></li>
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>) – The full path to the checklist.csv file to update.
Passing the full path will cause the dashboard database to be
by-passed even if the QC dashboard is installed.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="datman.exceptions.html#datman.exceptions.MetadataException" title="datman.exceptions.MetadataException"><strong>MetadataException</strong></a> – When update fails for any subject in ‘entries’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.validate_subject_id">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">validate_subject_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subject_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1157"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.validate_subject_id" title="Permalink to this definition"></a></dt>
<dd><p>Ensures subject ID correctness based on configuration settings.</p>
<dl class="simple">
<dt>This checks that a given ID:</dt><dd><ol class="arabic simple">
<li><p>Matches a supported naming convention</p></li>
<li><p>Matches a study tag that’s defined in the configuration file for
the current study</p></li>
<li><p>Matches a site that is defined for the study tag</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subject_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>) – A subject ID to check.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="datman.config.html#datman.config.config" title="datman.config.config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">datman.config.config</span></code></a>) – A datman config instance that
has been initialized to the study the subject ID should belong to.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="datman.exceptions.html#datman.exceptions.ParseException" title="datman.exceptions.ParseException"><strong>ParseException</strong></a> – When an ID is given that does not match any supported
    convention or that contains incorrect fields for the current study.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A parsed datman identifier matching</dt><dd><p>subject_id</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="datman.scanid.html#datman.scanid.Identifier" title="datman.scanid.Identifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">datman.scanid.Identifier</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.write_json">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">write_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L1373"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.write_json" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="datman.utils.write_metadata">
<span class="sig-prename descclassname"><span class="pre">datman.utils.</span></span><span class="sig-name descname"><span class="pre">write_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/tigrlab/datman/blob/f26c053/datman/utils.py#L610"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#datman.utils.write_metadata" title="Permalink to this definition"></a></dt>
<dd><p>Repeatedly attempts to write lines to &lt;path&gt;. The destination file
will be overwritten with &lt;lines&gt; so any contents you wish to preserve
should be contained within the list.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="datman.scanid.html" class="btn btn-neutral float-left" title="datman.scanid module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="datman.xnat.html" class="btn btn-neutral float-right" title="datman.xnat module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016, TIGRLab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>